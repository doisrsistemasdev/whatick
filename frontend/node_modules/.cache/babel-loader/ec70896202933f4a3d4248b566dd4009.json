{"ast":null,"code":"import _slicedToArray from\"/Users/jucenirleonardo/Documents/GitHub/whaticket_saas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/jucenirleonardo/Documents/GitHub/whaticket_saas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState,useContext}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import Paper from\"@material-ui/core/Paper\";import Button from\"@material-ui/core/Button\";import Grid from'@material-ui/core/Grid';import TextField from'@material-ui/core/TextField';import SubscriptionModal from\"../../components/SubscriptionModal\";import MainHeader from\"../../components/MainHeader\";import Title from\"../../components/Title\";import MainContainer from\"../../components/MainContainer\";import{AuthContext}from\"../../context/Auth/AuthContext\";var useStyles=makeStyles(function(theme){return{mainPaper:_objectSpread({flex:1,padding:theme.spacing(1),overflowY:\"scroll\"},theme.scrollbarStyles)};});var _formatDate=function _formatDate(date){var now=new Date();var past=new Date(date);var diff=Math.abs(now.getTime()-past.getTime());var days=Math.ceil(diff/(1000*60*60*24));return days;};var Contacts=function Contacts(){var _user$company,_user$company2;var classes=useStyles();var _useContext=useContext(AuthContext),user=_useContext.user;var _useState=useState(false),_useState2=_slicedToArray(_useState,1),loading=_useState2[0];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),setPageNumber=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedContactId=_useState6[0],setSelectedContactId=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),contactModalOpen=_useState8[0],setContactModalOpen=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,1),hasMore=_useState10[0];var handleOpenContactModal=function handleOpenContactModal(){setSelectedContactId(null);setContactModalOpen(true);};var handleCloseContactModal=function handleCloseContactModal(){setSelectedContactId(null);setContactModalOpen(false);};var loadMore=function loadMore(){setPageNumber(function(prevState){return prevState+1;});};var handleScroll=function handleScroll(e){if(!hasMore||loading)return;var _e$currentTarget=e.currentTarget,scrollTop=_e$currentTarget.scrollTop,scrollHeight=_e$currentTarget.scrollHeight,clientHeight=_e$currentTarget.clientHeight;if(scrollHeight-(scrollTop+100)<clientHeight){loadMore();}};return/*#__PURE__*/React.createElement(MainContainer,{className:classes.mainContainer},/*#__PURE__*/React.createElement(SubscriptionModal,{open:contactModalOpen,onClose:handleCloseContactModal,\"aria-labelledby\":\"form-dialog-title\",contactId:selectedContactId}),/*#__PURE__*/React.createElement(MainHeader,null,/*#__PURE__*/React.createElement(Title,null,\"Assinatura\")),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:4},/*#__PURE__*/React.createElement(Paper,{className:classes.mainPaper,variant:\"outlined\",onScroll:handleScroll},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(TextField,{id:\"outlined-full-width\",label:\"Per\\xEDodo de teste\",defaultValue:\"Seu per\\xEDodo de teste termina em \".concat(_formatDate(user===null||user===void 0?void 0:(_user$company=user.company)===null||_user$company===void 0?void 0:_user$company.trialExpiration),\" dias!\"),fullWidth:true,margin:\"normal\",InputLabelProps:{shrink:true},InputProps:{readOnly:true},variant:\"outlined\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(TextField,{id:\"outlined-full-width\",label:\"Email de cobran\\xE7a\",defaultValue:user===null||user===void 0?void 0:(_user$company2=user.company)===null||_user$company2===void 0?void 0:_user$company2.email,fullWidth:true,margin:\"normal\",InputLabelProps:{shrink:true},InputProps:{readOnly:true},variant:\"outlined\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",onClick:handleOpenContactModal,fullWidth:true},\"Assine Agora!\")))));};export default Contacts;","map":null,"metadata":{},"sourceType":"module"}