{"ast":null,"code":"var _jsxFileName = \"/Users/jucenirleonardo/Documents/GitHub/whaticket_saas/frontend/src/pages/QuickMessages/index.js\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport MainContainer from \"../../components/MainContainer\";\nimport MainHeader from \"../../components/MainHeader\";\nimport Title from \"../../components/Title\";\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\nimport { makeStyles, Button, Paper } from \"@material-ui/core\";\nimport QuickMessagesTable from \"../../components/QuickMessagesTable\";\nimport QuickMessageDialog from \"../../components/QuickMessageDialog\";\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\nimport { i18n } from \"../../translate/i18n\";\nimport { toast } from \"react-toastify\";\nimport useQuickMessages from \"../../hooks/useQuickMessages\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nconst useStyles = makeStyles(theme => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles\n  }\n}));\nfunction QuickMessages(props) {\n  const classes = useStyles();\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [messageSelected, setMessageSelected] = useState({});\n  const [showOnDeleteDialog, setShowOnDeleteDialog] = useState(false);\n  const {\n    list: listMessages,\n    save: saveMessage,\n    update: updateMessage,\n    deleteRecord: deleteMessage\n  } = useQuickMessages();\n  const {\n    user\n  } = useContext(AuthContext);\n  useEffect(() => {\n    const fetchData = async () => {\n      await loadingQuickMessages();\n    };\n    fetchData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const loadingQuickMessages = async () => {\n    setLoading(true);\n    try {\n      const companyId = localStorage.getItem(\"companyId\");\n      const messages = await listMessages({\n        companyId,\n        userId: user.id\n      });\n      setMessages(messages);\n    } catch (e) {\n      toast.error(e);\n    }\n    setLoading(false);\n  };\n  const handleOpenToAdd = () => {\n    setModalOpen(true);\n  };\n  const handleOpenToEdit = message => {\n    setMessageSelected(message);\n    setModalOpen(true);\n  };\n  const handleCloseModal = () => {\n    setModalOpen(false);\n    setMessageSelected({\n      id: null,\n      message: \"\",\n      shortcode: \"\"\n    });\n  };\n  const handleSave = async message => {\n    handleCloseModal();\n    try {\n      await saveMessage(message);\n      await loadingQuickMessages();\n      toast.success(\"Messagem adicionada com sucesso.\");\n    } catch (e) {\n      toast.error(e);\n    }\n  };\n  const handleEdit = async message => {\n    handleCloseModal();\n    try {\n      await updateMessage(message);\n      await loadingQuickMessages();\n      toast.success(\"Messagem atualizada com sucesso.\");\n    } catch (e) {\n      toast.error(e);\n    }\n  };\n  const handleDelete = async message => {\n    handleCloseModal();\n    try {\n      await deleteMessage(message.id);\n      await loadingQuickMessages();\n      toast.success(\"Messagem excluída com sucesso.\");\n    } catch (e) {\n      toast.error(e);\n    }\n  };\n  return /*#__PURE__*/React.createElement(MainContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(MainHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, i18n.t(\"quickMessages.title\")), /*#__PURE__*/React.createElement(MainHeaderButtonsWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleOpenToAdd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }, i18n.t(\"quickMessages.buttons.add\")))), /*#__PURE__*/React.createElement(Paper, {\n    className: classes.mainPaper,\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(QuickMessagesTable, {\n    readOnly: false,\n    messages: messages,\n    showLoading: loading,\n    editMessage: handleOpenToEdit,\n    deleteMessage: message => {\n      setMessageSelected(message);\n      setShowOnDeleteDialog(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(QuickMessageDialog, {\n    messageSelected: messageSelected,\n    modalOpen: modalOpen,\n    onClose: handleCloseModal,\n    editMessage: handleEdit,\n    saveMessage: handleSave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ConfirmationModal, {\n    title: \"Excluir Registro\",\n    open: showOnDeleteDialog,\n    onClose: setShowOnDeleteDialog,\n    onConfirm: async () => {\n      await handleDelete(messageSelected);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }, \"Deseja realmente excluir este registro?\"));\n}\nexport default QuickMessages;","map":{"version":3,"names":["React","useState","useEffect","useContext","MainContainer","MainHeader","Title","MainHeaderButtonsWrapper","makeStyles","Button","Paper","QuickMessagesTable","QuickMessageDialog","ConfirmationModal","i18n","toast","useQuickMessages","AuthContext","useStyles","theme","mainPaper","flex","padding","spacing","overflowY","scrollbarStyles","QuickMessages","props","classes","messages","setMessages","loading","setLoading","modalOpen","setModalOpen","messageSelected","setMessageSelected","showOnDeleteDialog","setShowOnDeleteDialog","list","listMessages","save","saveMessage","update","updateMessage","deleteRecord","deleteMessage","user","fetchData","loadingQuickMessages","companyId","localStorage","getItem","userId","id","e","error","handleOpenToAdd","handleOpenToEdit","message","handleCloseModal","shortcode","handleSave","success","handleEdit","handleDelete","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","t","variant","color","onClick","className","readOnly","showLoading","editMessage","onClose","title","open","onConfirm"],"sources":["/Users/jucenirleonardo/Documents/GitHub/whaticket_saas/frontend/src/pages/QuickMessages/index.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport MainContainer from \"../../components/MainContainer\";\nimport MainHeader from \"../../components/MainHeader\";\nimport Title from \"../../components/Title\";\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\nimport { makeStyles, Button, Paper } from \"@material-ui/core\";\n\nimport QuickMessagesTable from \"../../components/QuickMessagesTable\";\nimport QuickMessageDialog from \"../../components/QuickMessageDialog\";\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\n\nimport { i18n } from \"../../translate/i18n\";\nimport { toast } from \"react-toastify\";\n\nimport useQuickMessages from \"../../hooks/useQuickMessages\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n}));\n\nfunction QuickMessages(props) {\n  const classes = useStyles();\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [messageSelected, setMessageSelected] = useState({});\n  const [showOnDeleteDialog, setShowOnDeleteDialog] = useState(false);\n\n  const {\n    list: listMessages,\n    save: saveMessage,\n    update: updateMessage,\n    deleteRecord: deleteMessage,\n  } = useQuickMessages();\n\n  const { user } = useContext(AuthContext);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await loadingQuickMessages();\n    };\n    fetchData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const loadingQuickMessages = async () => {\n    setLoading(true);\n    try {\n      const companyId = localStorage.getItem(\"companyId\");\n      const messages = await listMessages({ companyId, userId: user.id });\n      setMessages(messages);\n    } catch (e) {\n      toast.error(e);\n    }\n    setLoading(false);\n  };\n\n  const handleOpenToAdd = () => {\n    setModalOpen(true);\n  };\n\n  const handleOpenToEdit = (message) => {\n    setMessageSelected(message);\n    setModalOpen(true);\n  };\n\n  const handleCloseModal = () => {\n    setModalOpen(false);\n    setMessageSelected({ id: null, message: \"\", shortcode: \"\" });\n  };\n\n  const handleSave = async (message) => {\n    handleCloseModal();\n    try {\n      await saveMessage(message);\n      await loadingQuickMessages();\n      toast.success(\"Messagem adicionada com sucesso.\");\n    } catch (e) {\n      toast.error(e);\n    }\n  };\n\n  const handleEdit = async (message) => {\n    handleCloseModal();\n    try {\n      await updateMessage(message);\n      await loadingQuickMessages();\n      toast.success(\"Messagem atualizada com sucesso.\");\n    } catch (e) {\n      toast.error(e);\n    }\n  };\n\n  const handleDelete = async (message) => {\n    handleCloseModal();\n    try {\n      await deleteMessage(message.id);\n      await loadingQuickMessages();\n      toast.success(\"Messagem excluída com sucesso.\");\n    } catch (e) {\n      toast.error(e);\n    }\n  };\n\n  return (\n    <MainContainer>\n      <MainHeader>\n        <Title>{i18n.t(\"quickMessages.title\")}</Title>\n        <MainHeaderButtonsWrapper>\n          <Button variant=\"contained\" color=\"primary\" onClick={handleOpenToAdd}>\n            {i18n.t(\"quickMessages.buttons.add\")}\n          </Button>\n        </MainHeaderButtonsWrapper>\n      </MainHeader>\n      <Paper className={classes.mainPaper} variant=\"outlined\">\n        <QuickMessagesTable\n          readOnly={false}\n          messages={messages}\n          showLoading={loading}\n          editMessage={handleOpenToEdit}\n          deleteMessage={(message) => {\n            setMessageSelected(message);\n            setShowOnDeleteDialog(true);\n          }}\n        />\n      </Paper>\n      <QuickMessageDialog\n        messageSelected={messageSelected}\n        modalOpen={modalOpen}\n        onClose={handleCloseModal}\n        editMessage={handleEdit}\n        saveMessage={handleSave}\n      />\n      <ConfirmationModal\n        title=\"Excluir Registro\"\n        open={showOnDeleteDialog}\n        onClose={setShowOnDeleteDialog}\n        onConfirm={async () => {\n          await handleDelete(messageSelected);\n        }}\n      >\n        Deseja realmente excluir este registro?\n      </ConfirmationModal>\n    </MainContainer>\n  );\n}\n\nexport default QuickMessages;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}