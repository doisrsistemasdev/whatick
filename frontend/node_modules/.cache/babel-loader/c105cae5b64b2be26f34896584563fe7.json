{"ast":null,"code":"var _jsxFileName = \"/Users/jucenirleonardo/Documents/GitHub/whaticket_saas/frontend/src/components/MessagesList/index.js\";\nimport React, { useState, useEffect, useReducer, useRef } from \"react\";\nimport { isSameDay, parseISO, format } from \"date-fns\";\nimport clsx from \"clsx\";\nimport { green } from \"@material-ui/core/colors\";\nimport { Button, CircularProgress, Divider, IconButton, makeStyles } from \"@material-ui/core\";\nimport { AccessTime, Block, Done, DoneAll, ExpandMore, GetApp } from \"@material-ui/icons\";\nimport MarkdownWrapper from \"../MarkdownWrapper\";\nimport ModalImageCors from \"../ModalImageCors\";\nimport MessageOptionsMenu from \"../MessageOptionsMenu\";\nimport whatsBackground from \"../../assets/wa-background.png\";\nimport LocationPreview from \"../LocationPreview\";\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\nimport { socketConnection } from \"../../services/socket\";\nconst useStyles = makeStyles(theme => ({\n  messagesListWrapper: {\n    overflow: \"hidden\",\n    position: \"relative\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    width: \"100%\",\n    minWidth: 300,\n    minHeight: 200\n  },\n  messagesList: {\n    backgroundImage: `url(${whatsBackground})`,\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    padding: \"20px 20px 20px 20px\",\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles\n  },\n  circleLoading: {\n    color: green[500],\n    position: \"absolute\",\n    opacity: \"70%\",\n    top: 0,\n    left: \"50%\",\n    marginTop: 12\n  },\n  messageLeft: {\n    marginRight: 20,\n    marginTop: 2,\n    minWidth: 100,\n    maxWidth: 600,\n    height: \"auto\",\n    display: \"block\",\n    position: \"relative\",\n    \"&:hover #messageActionsButton\": {\n      display: \"flex\",\n      position: \"absolute\",\n      top: 0,\n      right: 0\n    },\n    whiteSpace: \"pre-wrap\",\n    backgroundColor: \"#ffffff\",\n    color: \"#303030\",\n    alignSelf: \"flex-start\",\n    borderTopLeftRadius: 0,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: \"0 1px 1px #b3b3b3\"\n  },\n  quotedContainerLeft: {\n    margin: \"-3px -80px 6px -6px\",\n    overflow: \"hidden\",\n    backgroundColor: \"#f0f0f0\",\n    borderRadius: \"7.5px\",\n    display: \"flex\",\n    position: \"relative\"\n  },\n  quotedMsg: {\n    padding: 10,\n    maxWidth: 300,\n    height: \"auto\",\n    display: \"block\",\n    whiteSpace: \"pre-wrap\",\n    overflow: \"hidden\"\n  },\n  quotedSideColorLeft: {\n    flex: \"none\",\n    width: \"4px\",\n    backgroundColor: \"#6bcbef\"\n  },\n  messageRight: {\n    marginLeft: 20,\n    marginTop: 2,\n    minWidth: 100,\n    maxWidth: 600,\n    height: \"auto\",\n    display: \"block\",\n    position: \"relative\",\n    \"&:hover #messageActionsButton\": {\n      display: \"flex\",\n      position: \"absolute\",\n      top: 0,\n      right: 0\n    },\n    whiteSpace: \"pre-wrap\",\n    backgroundColor: \"#dcf8c6\",\n    color: \"#303030\",\n    alignSelf: \"flex-end\",\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 0,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: \"0 1px 1px #b3b3b3\"\n  },\n  quotedContainerRight: {\n    margin: \"-3px -80px 6px -6px\",\n    overflowY: \"hidden\",\n    backgroundColor: \"#cfe9ba\",\n    borderRadius: \"7.5px\",\n    display: \"flex\",\n    position: \"relative\"\n  },\n  quotedMsgRight: {\n    padding: 10,\n    maxWidth: 300,\n    height: \"auto\",\n    whiteSpace: \"pre-wrap\"\n  },\n  quotedSideColorRight: {\n    flex: \"none\",\n    width: \"4px\",\n    backgroundColor: \"#35cd96\"\n  },\n  messageActionsButton: {\n    display: \"none\",\n    position: \"relative\",\n    color: \"#999\",\n    zIndex: 1,\n    backgroundColor: \"inherit\",\n    opacity: \"90%\",\n    \"&:hover, &.Mui-focusVisible\": {\n      backgroundColor: \"inherit\"\n    }\n  },\n  messageContactName: {\n    display: \"flex\",\n    color: \"#6bcbef\",\n    fontWeight: 500\n  },\n  textContentItem: {\n    overflowWrap: \"break-word\",\n    padding: \"3px 80px 6px 6px\"\n  },\n  textContentItemDeleted: {\n    fontStyle: \"italic\",\n    color: \"rgba(0, 0, 0, 0.36)\",\n    overflowWrap: \"break-word\",\n    padding: \"3px 80px 6px 6px\"\n  },\n  messageMedia: {\n    objectFit: \"cover\",\n    width: 250,\n    height: 200,\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8\n  },\n  timestamp: {\n    fontSize: 11,\n    position: \"absolute\",\n    bottom: 0,\n    right: 5,\n    color: \"#999\"\n  },\n  dailyTimestamp: {\n    alignItems: \"center\",\n    textAlign: \"center\",\n    alignSelf: \"center\",\n    width: \"110px\",\n    backgroundColor: \"#e1f3fb\",\n    margin: \"10px\",\n    borderRadius: \"10px\",\n    boxShadow: \"0 1px 1px #b3b3b3\"\n  },\n  dailyTimestampText: {\n    color: \"#808888\",\n    padding: 8,\n    alignSelf: \"center\",\n    marginLeft: \"0px\"\n  },\n  ackIcons: {\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginLeft: 4\n  },\n  deletedIcon: {\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginRight: 4\n  },\n  ackDoneAllIcon: {\n    color: green[500],\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginLeft: 4\n  },\n  downloadMedia: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"inherit\",\n    padding: 10\n  }\n}));\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_MESSAGES\") {\n    const messages = action.payload;\n    const newMessages = [];\n    messages.forEach(message => {\n      const messageIndex = state.findIndex(m => m.id === message.id);\n      if (messageIndex !== -1) {\n        state[messageIndex] = message;\n      } else {\n        newMessages.push(message);\n      }\n    });\n    return [...newMessages, ...state];\n  }\n  if (action.type === \"ADD_MESSAGE\") {\n    const newMessage = action.payload;\n    const messageIndex = state.findIndex(m => m.id === newMessage.id);\n    if (messageIndex !== -1) {\n      state[messageIndex] = newMessage;\n    } else {\n      state.push(newMessage);\n    }\n    return [...state];\n  }\n  if (action.type === \"UPDATE_MESSAGE\") {\n    const messageToUpdate = action.payload;\n    const messageIndex = state.findIndex(m => m.id === messageToUpdate.id);\n    if (messageIndex !== -1) {\n      state[messageIndex] = messageToUpdate;\n    }\n    return [...state];\n  }\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\nconst MessagesList = _ref => {\n  let {\n    ticket,\n    ticketId,\n    isGroup\n  } = _ref;\n  const classes = useStyles();\n  const [messagesList, dispatch] = useReducer(reducer, []);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const lastMessageRef = useRef();\n  const [selectedMessage, setSelectedMessage] = useState({});\n  const [anchorEl, setAnchorEl] = useState(null);\n  const messageOptionsMenuOpen = Boolean(anchorEl);\n  const currentTicketId = useRef(ticketId);\n  useEffect(() => {\n    dispatch({\n      type: \"RESET\"\n    });\n    setPageNumber(1);\n    currentTicketId.current = ticketId;\n  }, [ticketId]);\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchMessages = async () => {\n        if (ticketId === undefined) return;\n        try {\n          const {\n            data\n          } = await api.get(\"/messages/\" + ticketId, {\n            params: {\n              pageNumber\n            }\n          });\n          if (currentTicketId.current === ticketId) {\n            dispatch({\n              type: \"LOAD_MESSAGES\",\n              payload: data.messages\n            });\n            setHasMore(data.hasMore);\n            setLoading(false);\n          }\n          if (pageNumber === 1 && data.messages.length > 1) {\n            scrollToBottom();\n          }\n        } catch (err) {\n          setLoading(false);\n          toastError(err);\n        }\n      };\n      fetchMessages();\n    }, 500);\n    return () => {\n      clearTimeout(delayDebounceFn);\n    };\n  }, [pageNumber, ticketId]);\n  useEffect(() => {\n    const companyId = localStorage.getItem(\"companyId\");\n    const socket = socketConnection({\n      companyId\n    });\n    socket.on(\"connect\", () => socket.emit(\"joinChatBox\", `${ticket.id}`));\n    socket.on(`company-${companyId}-appMessage`, data => {\n      if (data.action === \"create\") {\n        dispatch({\n          type: \"ADD_MESSAGE\",\n          payload: data.message\n        });\n        scrollToBottom();\n      }\n      if (data.action === \"update\") {\n        dispatch({\n          type: \"UPDATE_MESSAGE\",\n          payload: data.message\n        });\n      }\n    });\n    return () => {\n      socket.disconnect();\n    };\n  }, [ticketId, ticket]);\n  const loadMore = () => {\n    setPageNumber(prevPageNumber => prevPageNumber + 1);\n  };\n  const scrollToBottom = () => {\n    if (lastMessageRef.current) {\n      lastMessageRef.current.scrollIntoView({});\n    }\n  };\n  const handleScroll = e => {\n    if (!hasMore) return;\n    const {\n      scrollTop\n    } = e.currentTarget;\n    if (scrollTop === 0) {\n      document.getElementById(\"messagesList\").scrollTop = 1;\n    }\n    if (loading) {\n      return;\n    }\n    if (scrollTop < 50) {\n      loadMore();\n    }\n  };\n  const handleOpenMessageOptionsMenu = (e, message) => {\n    setAnchorEl(e.currentTarget);\n    setSelectedMessage(message);\n  };\n  const handleCloseMessageOptionsMenu = e => {\n    setAnchorEl(null);\n  };\n  const checkMessageMedia = message => {\n    if (message.mediaType === \"locationMessage\" && message.body.split('|').length >= 2) {\n      let locationParts = message.body.split('|');\n      let imageLocation = locationParts[0];\n      let linkLocation = locationParts[1];\n      let descriptionLocation = null;\n      if (locationParts.length > 2) descriptionLocation = message.body.split('|')[2];\n      return /*#__PURE__*/React.createElement(LocationPreview, {\n        image: imageLocation,\n        link: linkLocation,\n        description: descriptionLocation,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 14\n        }\n      });\n    }\n    /* else if (message.mediaType === \"vcard\") {\n      let array = message.body.split(\"\\n\");\n      let obj = [];\n      let contact = \"\";\n      for (let index = 0; index < array.length; index++) {\n        const v = array[index];\n        let values = v.split(\":\");\n        for (let ind = 0; ind < values.length; ind++) {\n          if (values[ind].indexOf(\"+\") !== -1) {\n            obj.push({ number: values[ind] });\n          }\n          if (values[ind].indexOf(\"FN\") !== -1) {\n            contact = values[ind + 1];\n          }\n        }\n      }\n      return <VcardPreview contact={contact} numbers={obj[0].number} />\n    } */\n    /*else if (message.mediaType === \"multi_vcard\") {\n      console.log(\"multi_vcard\")\n      console.log(message)\n    \t\n      if(message.body !== null && message.body !== \"\") {\n        let newBody = JSON.parse(message.body)\n        return (\n          <>\n            {\n            newBody.map(v => (\n              <VcardPreview contact={v.name} numbers={v.number} />\n            ))\n            }\n          </>\n        )\n      } else return (<></>)\n    }*/else if (message.mediaType === \"image\") {\n      return /*#__PURE__*/React.createElement(ModalImageCors, {\n        imageUrl: message.mediaUrl,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 14\n        }\n      });\n    } else if (message.mediaType === \"audio\") {\n      return /*#__PURE__*/React.createElement(\"audio\", {\n        controls: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"source\", {\n        src: message.mediaUrl,\n        type: \"audio/ogg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 11\n        }\n      }));\n    } else if (message.mediaType === \"video\") {\n      return /*#__PURE__*/React.createElement(\"video\", {\n        className: classes.messageMedia,\n        src: message.mediaUrl,\n        controls: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 9\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.downloadMedia,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        startIcon: /*#__PURE__*/React.createElement(GetApp, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 26\n          }\n        }),\n        color: \"primary\",\n        variant: \"outlined\",\n        target: \"_blank\",\n        href: message.mediaUrl,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 13\n        }\n      }, \"Download\")), /*#__PURE__*/React.createElement(Divider, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 11\n        }\n      }));\n    }\n  };\n  const renderMessageAck = message => {\n    if (message.ack === 1) {\n      return /*#__PURE__*/React.createElement(AccessTime, {\n        fontSize: \"small\",\n        className: classes.ackIcons,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 14\n        }\n      });\n    }\n    if (message.ack === 2) {\n      return /*#__PURE__*/React.createElement(Done, {\n        fontSize: \"small\",\n        className: classes.ackIcons,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 14\n        }\n      });\n    }\n    if (message.ack === 3) {\n      return /*#__PURE__*/React.createElement(DoneAll, {\n        fontSize: \"small\",\n        className: classes.ackIcons,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 14\n        }\n      });\n    }\n    if (message.ack === 4 || message.ack === 5) {\n      return /*#__PURE__*/React.createElement(DoneAll, {\n        fontSize: \"small\",\n        className: classes.ackDoneAllIcon,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 14\n        }\n      });\n    }\n  };\n  const renderDailyTimestamps = (message, index) => {\n    if (index === 0) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: classes.dailyTimestamp,\n        key: `timestamp-${message.id}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.dailyTimestampText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 11\n        }\n      }, format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")));\n    }\n    if (index < messagesList.length - 1) {\n      let messageDay = parseISO(messagesList[index].createdAt);\n      let previousMessageDay = parseISO(messagesList[index - 1].createdAt);\n      if (!isSameDay(messageDay, previousMessageDay)) {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          className: classes.dailyTimestamp,\n          key: `timestamp-${message.id}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: classes.dailyTimestampText,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 13\n          }\n        }, format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")));\n      }\n    }\n    if (index === messagesList.length - 1) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: `ref-${message.createdAt}`,\n        ref: lastMessageRef,\n        style: {\n          float: \"left\",\n          clear: \"both\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 9\n        }\n      });\n    }\n  };\n  const renderNumberTicket = (message, index) => {\n    if (index < messagesList.length && index > 0) {\n      var _message$ticket, _message$ticket$whats;\n      let messageTicket = message.ticketId;\n      let connectionName = (_message$ticket = message.ticket) === null || _message$ticket === void 0 ? void 0 : (_message$ticket$whats = _message$ticket.whatsapp) === null || _message$ticket$whats === void 0 ? void 0 : _message$ticket$whats.name;\n      let previousMessageTicket = messagesList[index - 1].ticketId;\n      if (messageTicket !== previousMessageTicket) {\n        return /*#__PURE__*/React.createElement(\"center\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: classes.ticketNunberClosed,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 13\n          }\n        }, \"Conversa encerrada: \", format(parseISO(messagesList[index - 1].createdAt), \"dd/MM/yyyy HH:mm:ss\")), /*#__PURE__*/React.createElement(\"div\", {\n          className: classes.ticketNunberOpen,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 13\n          }\n        }, \"Conversa iniciada: \", format(parseISO(message.createdAt), \"dd/MM/yyyy HH:mm:ss\")));\n      }\n    }\n  };\n  const renderMessageDivider = (message, index) => {\n    if (index < messagesList.length && index > 0) {\n      let messageUser = messagesList[index].fromMe;\n      let previousMessageUser = messagesList[index - 1].fromMe;\n      if (messageUser !== previousMessageUser) {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          style: {\n            marginTop: 16\n          },\n          key: `divider-${message.id}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 11\n          }\n        });\n      }\n    }\n  };\n  const renderQuotedMessage = message => {\n    var _message$quotedMsg, _message$quotedMsg2, _message$quotedMsg3, _message$quotedMsg3$c, _message$quotedMsg4;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: clsx(classes.quotedContainerLeft, {\n        [classes.quotedContainerRight]: message.fromMe\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: clsx(classes.quotedSideColorLeft, {\n        [classes.quotedSideColorRight]: (_message$quotedMsg = message.quotedMsg) === null || _message$quotedMsg === void 0 ? void 0 : _message$quotedMsg.fromMe\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.quotedMsg,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 607,\n        columnNumber: 9\n      }\n    }, !((_message$quotedMsg2 = message.quotedMsg) === null || _message$quotedMsg2 === void 0 ? void 0 : _message$quotedMsg2.fromMe) && /*#__PURE__*/React.createElement(\"span\", {\n      className: classes.messageContactName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 13\n      }\n    }, (_message$quotedMsg3 = message.quotedMsg) === null || _message$quotedMsg3 === void 0 ? void 0 : (_message$quotedMsg3$c = _message$quotedMsg3.contact) === null || _message$quotedMsg3$c === void 0 ? void 0 : _message$quotedMsg3$c.name), message.quotedMsg.mediaType === \"audio\" && /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.downloadMedia,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 616,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"audio\", {\n      controls: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 617,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"source\", {\n      src: message.quotedMsg.mediaUrl,\n      type: \"audio/ogg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 618,\n        columnNumber: 19\n      }\n    }))), message.quotedMsg.mediaType === \"video\" && /*#__PURE__*/React.createElement(\"video\", {\n      className: classes.messageMedia,\n      src: message.quotedMsg.mediaUrl,\n      controls: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 15\n      }\n    }), message.quotedMsg.mediaType === \"application\" && /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.downloadMedia,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 634,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      startIcon: /*#__PURE__*/React.createElement(GetApp, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 636,\n          columnNumber: 30\n        }\n      }),\n      color: \"primary\",\n      variant: \"outlined\",\n      target: \"_blank\",\n      href: message.quotedMsg.mediaUrl,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 635,\n        columnNumber: 17\n      }\n    }, \"Download\")), message.quotedMsg.mediaType === \"image\" && /*#__PURE__*/React.createElement(ModalImageCors, {\n      imageUrl: message.quotedMsg.mediaUrl,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 650,\n        columnNumber: 15\n      }\n    }) || ((_message$quotedMsg4 = message.quotedMsg) === null || _message$quotedMsg4 === void 0 ? void 0 : _message$quotedMsg4.body)));\n  };\n  const renderMessages = () => {\n    if (messagesList.length > 0) {\n      const viewMessagesList = messagesList.map((message, index) => {\n        if (message.mediaType === \"call_log\") {\n          var _message$contact;\n          return /*#__PURE__*/React.createElement(React.Fragment, {\n            key: message.id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 664,\n              columnNumber: 13\n            }\n          }, renderDailyTimestamps(message, index), renderNumberTicket(message, index), renderMessageDivider(message, index), /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.messageCenter,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 668,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(IconButton, {\n            variant: \"contained\",\n            size: \"small\",\n            id: \"messageActionsButton\",\n            disabled: message.isDeleted,\n            className: classes.messageActionsButton,\n            onClick: e => handleOpenMessageOptionsMenu(e, message),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 669,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(ExpandMore, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 677,\n              columnNumber: 19\n            }\n          })), isGroup && /*#__PURE__*/React.createElement(\"span\", {\n            className: classes.messageContactName,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 680,\n              columnNumber: 19\n            }\n          }, (_message$contact = message.contact) === null || _message$contact === void 0 ? void 0 : _message$contact.name), /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 684,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 20 17\",\n            width: \"20\",\n            height: \"17\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 685,\n              columnNumber: 19\n            }\n          }, /*#__PURE__*/React.createElement(\"path\", {\n            fill: \"#df3333\",\n            d: \"M18.2 12.1c-1.5-1.8-5-2.7-8.2-2.7s-6.7 1-8.2 2.7c-.7.8-.3 2.3.2 2.8.2.2.3.3.5.3 1.4 0 3.6-.7 3.6-.7.5-.2.8-.5.8-1v-1.3c.7-1.2 5.4-1.2 6.4-.1l.1.1v1.3c0 .2.1.4.2.6.1.2.3.3.5.4 0 0 2.2.7 3.6.7.2 0 1.4-2 .5-3.1zM5.4 3.2l4.7 4.6 5.8-5.7-.9-.8L10.1 6 6.4 2.3h2.5V1H4.1v4.8h1.3V3.2z\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 686,\n              columnNumber: 21\n            }\n          })), \" \", /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 687,\n              columnNumber: 26\n            }\n          }, \"Chamada de voz/v\\xEDdeo perdida \\xE0s \", format(parseISO(message.createdAt), \"HH:mm\")))));\n        }\n        if (!message.fromMe) {\n          var _message$contact2;\n          return /*#__PURE__*/React.createElement(React.Fragment, {\n            key: message.id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 696,\n              columnNumber: 13\n            }\n          }, renderDailyTimestamps(message, index), renderNumberTicket(message, index), renderMessageDivider(message, index), /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.messageLeft,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 700,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(IconButton, {\n            variant: \"contained\",\n            size: \"small\",\n            id: \"messageActionsButton\",\n            disabled: message.isDeleted,\n            className: classes.messageActionsButton,\n            onClick: e => handleOpenMessageOptionsMenu(e, message),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 701,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(ExpandMore, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 709,\n              columnNumber: 19\n            }\n          })), isGroup && /*#__PURE__*/React.createElement(\"span\", {\n            className: classes.messageContactName,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 712,\n              columnNumber: 19\n            }\n          }, (_message$contact2 = message.contact) === null || _message$contact2 === void 0 ? void 0 : _message$contact2.name), message.isDeleted && /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 719,\n              columnNumber: 19\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"message-deleted\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 720,\n              columnNumber: 21\n            }\n          }, \"Essa mensagem foi apagada pelo contato \\xA0\", /*#__PURE__*/React.createElement(Block, {\n            color: \"error\",\n            fontSize: \"small\",\n            className: classes.deletedIcon,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 722,\n              columnNumber: 23\n            }\n          }))), (message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"vcard\"\n          //|| message.mediaType === \"multi_vcard\" \n          ) && checkMessageMedia(message), /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.textContentItem,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 734,\n              columnNumber: 17\n            }\n          }, message.quotedMsg && renderQuotedMessage(message), /*#__PURE__*/React.createElement(MarkdownWrapper, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 736,\n              columnNumber: 19\n            }\n          }, message.mediaType === \"locationMessage\" ? null : message.body), /*#__PURE__*/React.createElement(\"span\", {\n            className: classes.timestamp,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 737,\n              columnNumber: 19\n            }\n          }, format(parseISO(message.createdAt), \"HH:mm\")))));\n        } else {\n          return /*#__PURE__*/React.createElement(React.Fragment, {\n            key: message.id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 746,\n              columnNumber: 13\n            }\n          }, renderDailyTimestamps(message, index), renderNumberTicket(message, index), renderMessageDivider(message, index), /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.messageRight,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 750,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(IconButton, {\n            variant: \"contained\",\n            size: \"small\",\n            id: \"messageActionsButton\",\n            disabled: message.isDeleted,\n            className: classes.messageActionsButton,\n            onClick: e => handleOpenMessageOptionsMenu(e, message),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 751,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(ExpandMore, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 759,\n              columnNumber: 19\n            }\n          })), (message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"vcard\"\n          //|| message.mediaType === \"multi_vcard\" \n          ) && checkMessageMedia(message), /*#__PURE__*/React.createElement(\"div\", {\n            className: clsx(classes.textContentItem, {\n              [classes.textContentItemDeleted]: message.isDeleted\n            }),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 764,\n              columnNumber: 17\n            }\n          }, message.isDeleted && /*#__PURE__*/React.createElement(Block, {\n            color: \"disabled\",\n            fontSize: \"small\",\n            className: classes.deletedIcon,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 770,\n              columnNumber: 21\n            }\n          }), message.quotedMsg && renderQuotedMessage(message), /*#__PURE__*/React.createElement(MarkdownWrapper, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 777,\n              columnNumber: 19\n            }\n          }, message.body), /*#__PURE__*/React.createElement(\"span\", {\n            className: classes.timestamp,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 778,\n              columnNumber: 19\n            }\n          }, format(parseISO(message.createdAt), \"HH:mm\"), renderMessageAck(message)))));\n        }\n      });\n      return viewMessagesList;\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 790,\n          columnNumber: 14\n        }\n      }, \"Diga ol\\xE1 para seu novo contato!\");\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.messagesListWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 795,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(MessageOptionsMenu, {\n    message: selectedMessage,\n    anchorEl: anchorEl,\n    menuOpen: messageOptionsMenuOpen,\n    handleClose: handleCloseMessageOptionsMenu,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 796,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"messagesList\",\n    className: classes.messagesList,\n    onScroll: handleScroll,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 802,\n      columnNumber: 7\n    }\n  }, messagesList.length > 0 ? renderMessages() : []), loading && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 810,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    className: classes.circleLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 811,\n      columnNumber: 11\n    }\n  })));\n};\nexport default MessagesList;","map":{"version":3,"names":["React","useState","useEffect","useReducer","useRef","isSameDay","parseISO","format","clsx","green","Button","CircularProgress","Divider","IconButton","makeStyles","AccessTime","Block","Done","DoneAll","ExpandMore","GetApp","MarkdownWrapper","ModalImageCors","MessageOptionsMenu","whatsBackground","LocationPreview","api","toastError","socketConnection","useStyles","theme","messagesListWrapper","overflow","position","display","flexDirection","flexGrow","width","minWidth","minHeight","messagesList","backgroundImage","padding","overflowY","scrollbarStyles","circleLoading","color","opacity","top","left","marginTop","messageLeft","marginRight","maxWidth","height","right","whiteSpace","backgroundColor","alignSelf","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","paddingLeft","paddingRight","paddingTop","paddingBottom","boxShadow","quotedContainerLeft","margin","borderRadius","quotedMsg","quotedSideColorLeft","flex","messageRight","marginLeft","quotedContainerRight","quotedMsgRight","quotedSideColorRight","messageActionsButton","zIndex","messageContactName","fontWeight","textContentItem","overflowWrap","textContentItemDeleted","fontStyle","messageMedia","objectFit","timestamp","fontSize","bottom","dailyTimestamp","alignItems","textAlign","dailyTimestampText","ackIcons","verticalAlign","deletedIcon","ackDoneAllIcon","downloadMedia","justifyContent","reducer","state","action","type","messages","payload","newMessages","forEach","message","messageIndex","findIndex","m","id","push","newMessage","messageToUpdate","MessagesList","_ref","ticket","ticketId","isGroup","classes","dispatch","pageNumber","setPageNumber","hasMore","setHasMore","loading","setLoading","lastMessageRef","selectedMessage","setSelectedMessage","anchorEl","setAnchorEl","messageOptionsMenuOpen","Boolean","currentTicketId","current","delayDebounceFn","setTimeout","fetchMessages","undefined","data","get","params","length","scrollToBottom","err","clearTimeout","companyId","localStorage","getItem","socket","on","emit","disconnect","loadMore","prevPageNumber","scrollIntoView","handleScroll","e","scrollTop","currentTarget","document","getElementById","handleOpenMessageOptionsMenu","handleCloseMessageOptionsMenu","checkMessageMedia","mediaType","body","split","locationParts","imageLocation","linkLocation","descriptionLocation","createElement","image","link","description","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","imageUrl","mediaUrl","controls","src","className","Fragment","startIcon","variant","target","href","renderMessageAck","ack","renderDailyTimestamps","index","key","createdAt","messageDay","previousMessageDay","ref","style","float","clear","renderNumberTicket","_message$ticket","_message$ticket$whats","messageTicket","connectionName","whatsapp","name","previousMessageTicket","ticketNunberClosed","ticketNunberOpen","renderMessageDivider","messageUser","fromMe","previousMessageUser","renderQuotedMessage","_message$quotedMsg","_message$quotedMsg2","_message$quotedMsg3","_message$quotedMsg3$c","_message$quotedMsg4","contact","renderMessages","viewMessagesList","map","_message$contact","messageCenter","size","disabled","isDeleted","onClick","xmlns","viewBox","fill","d","_message$contact2","menuOpen","handleClose","onScroll"],"sources":["/Users/jucenirleonardo/Documents/GitHub/whaticket_saas/frontend/src/components/MessagesList/index.js"],"sourcesContent":["import React, { useState, useEffect, useReducer, useRef } from \"react\";\n\nimport { isSameDay, parseISO, format } from \"date-fns\";\nimport clsx from \"clsx\";\n\nimport { green } from \"@material-ui/core/colors\";\nimport {\n  Button,\n  CircularProgress,\n  Divider,\n  IconButton,\n  makeStyles,\n} from \"@material-ui/core\";\n\nimport {\n  AccessTime,\n  Block,\n  Done,\n  DoneAll,\n  ExpandMore,\n  GetApp,\n} from \"@material-ui/icons\";\n\nimport MarkdownWrapper from \"../MarkdownWrapper\";\nimport ModalImageCors from \"../ModalImageCors\";\nimport MessageOptionsMenu from \"../MessageOptionsMenu\";\nimport whatsBackground from \"../../assets/wa-background.png\";\nimport LocationPreview from \"../LocationPreview\";\n\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\nimport { socketConnection } from \"../../services/socket\";\n\nconst useStyles = makeStyles((theme) => ({\n  messagesListWrapper: {\n    overflow: \"hidden\",\n    position: \"relative\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    width: \"100%\",\n    minWidth: 300,\n    minHeight: 200,\n  },\n\n  messagesList: {\n    backgroundImage: `url(${whatsBackground})`,\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    padding: \"20px 20px 20px 20px\",\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n\n  circleLoading: {\n    color: green[500],\n    position: \"absolute\",\n    opacity: \"70%\",\n    top: 0,\n    left: \"50%\",\n    marginTop: 12,\n  },\n\n  messageLeft: {\n    marginRight: 20,\n    marginTop: 2,\n    minWidth: 100,\n    maxWidth: 600,\n    height: \"auto\",\n    display: \"block\",\n    position: \"relative\",\n    \"&:hover #messageActionsButton\": {\n      display: \"flex\",\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n    },\n\n    whiteSpace: \"pre-wrap\",\n    backgroundColor: \"#ffffff\",\n    color: \"#303030\",\n    alignSelf: \"flex-start\",\n    borderTopLeftRadius: 0,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: \"0 1px 1px #b3b3b3\",\n  },\n\n  quotedContainerLeft: {\n    margin: \"-3px -80px 6px -6px\",\n    overflow: \"hidden\",\n    backgroundColor: \"#f0f0f0\",\n    borderRadius: \"7.5px\",\n    display: \"flex\",\n    position: \"relative\",\n  },\n\n  quotedMsg: {\n    padding: 10,\n    maxWidth: 300,\n    height: \"auto\",\n    display: \"block\",\n    whiteSpace: \"pre-wrap\",\n    overflow: \"hidden\",\n  },\n\n  quotedSideColorLeft: {\n    flex: \"none\",\n    width: \"4px\",\n    backgroundColor: \"#6bcbef\",\n  },\n\n  messageRight: {\n    marginLeft: 20,\n    marginTop: 2,\n    minWidth: 100,\n    maxWidth: 600,\n    height: \"auto\",\n    display: \"block\",\n    position: \"relative\",\n    \"&:hover #messageActionsButton\": {\n      display: \"flex\",\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n    },\n\n    whiteSpace: \"pre-wrap\",\n    backgroundColor: \"#dcf8c6\",\n    color: \"#303030\",\n    alignSelf: \"flex-end\",\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 0,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: \"0 1px 1px #b3b3b3\",\n  },\n\n  quotedContainerRight: {\n    margin: \"-3px -80px 6px -6px\",\n    overflowY: \"hidden\",\n    backgroundColor: \"#cfe9ba\",\n    borderRadius: \"7.5px\",\n    display: \"flex\",\n    position: \"relative\",\n  },\n\n  quotedMsgRight: {\n    padding: 10,\n    maxWidth: 300,\n    height: \"auto\",\n    whiteSpace: \"pre-wrap\",\n  },\n\n  quotedSideColorRight: {\n    flex: \"none\",\n    width: \"4px\",\n    backgroundColor: \"#35cd96\",\n  },\n\n  messageActionsButton: {\n    display: \"none\",\n    position: \"relative\",\n    color: \"#999\",\n    zIndex: 1,\n    backgroundColor: \"inherit\",\n    opacity: \"90%\",\n    \"&:hover, &.Mui-focusVisible\": { backgroundColor: \"inherit\" },\n  },\n\n  messageContactName: {\n    display: \"flex\",\n    color: \"#6bcbef\",\n    fontWeight: 500,\n  },\n\n  textContentItem: {\n    overflowWrap: \"break-word\",\n    padding: \"3px 80px 6px 6px\",\n  },\n\n  textContentItemDeleted: {\n    fontStyle: \"italic\",\n    color: \"rgba(0, 0, 0, 0.36)\",\n    overflowWrap: \"break-word\",\n    padding: \"3px 80px 6px 6px\",\n  },\n\n  messageMedia: {\n    objectFit: \"cover\",\n    width: 250,\n    height: 200,\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n  },\n\n  timestamp: {\n    fontSize: 11,\n    position: \"absolute\",\n    bottom: 0,\n    right: 5,\n    color: \"#999\",\n  },\n\n  dailyTimestamp: {\n    alignItems: \"center\",\n    textAlign: \"center\",\n    alignSelf: \"center\",\n    width: \"110px\",\n    backgroundColor: \"#e1f3fb\",\n    margin: \"10px\",\n    borderRadius: \"10px\",\n    boxShadow: \"0 1px 1px #b3b3b3\",\n  },\n\n  dailyTimestampText: {\n    color: \"#808888\",\n    padding: 8,\n    alignSelf: \"center\",\n    marginLeft: \"0px\",\n  },\n\n  ackIcons: {\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginLeft: 4,\n  },\n\n  deletedIcon: {\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginRight: 4,\n  },\n\n  ackDoneAllIcon: {\n    color: green[500],\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginLeft: 4,\n  },\n\n  downloadMedia: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"inherit\",\n    padding: 10,\n  },\n}));\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_MESSAGES\") {\n    const messages = action.payload;\n    const newMessages = [];\n\n    messages.forEach((message) => {\n      const messageIndex = state.findIndex((m) => m.id === message.id);\n      if (messageIndex !== -1) {\n        state[messageIndex] = message;\n      } else {\n        newMessages.push(message);\n      }\n    });\n\n    return [...newMessages, ...state];\n  }\n\n  if (action.type === \"ADD_MESSAGE\") {\n    const newMessage = action.payload;\n    const messageIndex = state.findIndex((m) => m.id === newMessage.id);\n\n    if (messageIndex !== -1) {\n      state[messageIndex] = newMessage;\n    } else {\n      state.push(newMessage);\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"UPDATE_MESSAGE\") {\n    const messageToUpdate = action.payload;\n    const messageIndex = state.findIndex((m) => m.id === messageToUpdate.id);\n\n    if (messageIndex !== -1) {\n      state[messageIndex] = messageToUpdate;\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst MessagesList = ({ ticket, ticketId, isGroup }) => {\n  const classes = useStyles();\n\n  const [messagesList, dispatch] = useReducer(reducer, []);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const lastMessageRef = useRef();\n\n  const [selectedMessage, setSelectedMessage] = useState({});\n  const [anchorEl, setAnchorEl] = useState(null);\n  const messageOptionsMenuOpen = Boolean(anchorEl);\n  const currentTicketId = useRef(ticketId);\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n\n    currentTicketId.current = ticketId;\n  }, [ticketId]);\n\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchMessages = async () => {\n        if (ticketId === undefined) return;\n        try {\n          const { data } = await api.get(\"/messages/\" + ticketId, {\n            params: { pageNumber },\n          });\n\n          if (currentTicketId.current === ticketId) {\n            dispatch({ type: \"LOAD_MESSAGES\", payload: data.messages });\n            setHasMore(data.hasMore);\n            setLoading(false);\n          }\n\n          if (pageNumber === 1 && data.messages.length > 1) {\n            scrollToBottom();\n          }\n        } catch (err) {\n          setLoading(false);\n          toastError(err);\n        }\n      };\n      fetchMessages();\n    }, 500);\n    return () => {\n      clearTimeout(delayDebounceFn);\n    };\n  }, [pageNumber, ticketId]);\n\n  useEffect(() => {\n    const companyId = localStorage.getItem(\"companyId\");\n    const socket = socketConnection({ companyId });\n\n    socket.on(\"connect\", () => socket.emit(\"joinChatBox\", `${ticket.id}`));\n\n    socket.on(`company-${companyId}-appMessage`, (data) => {\n      if (data.action === \"create\") {\n        dispatch({ type: \"ADD_MESSAGE\", payload: data.message });\n        scrollToBottom();\n      }\n\n      if (data.action === \"update\") {\n        dispatch({ type: \"UPDATE_MESSAGE\", payload: data.message });\n      }\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n  }, [ticketId, ticket]);\n\n  const loadMore = () => {\n    setPageNumber((prevPageNumber) => prevPageNumber + 1);\n  };\n\n  const scrollToBottom = () => {\n    if (lastMessageRef.current) {\n      lastMessageRef.current.scrollIntoView({});\n    }\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore) return;\n    const { scrollTop } = e.currentTarget;\n\n    if (scrollTop === 0) {\n      document.getElementById(\"messagesList\").scrollTop = 1;\n    }\n\n    if (loading) {\n      return;\n    }\n\n    if (scrollTop < 50) {\n      loadMore();\n    }\n  };\n\n  const handleOpenMessageOptionsMenu = (e, message) => {\n    setAnchorEl(e.currentTarget);\n    setSelectedMessage(message);\n  };\n\n  const handleCloseMessageOptionsMenu = (e) => {\n    setAnchorEl(null);\n  };\n\n  const checkMessageMedia = (message) => {\n    if (message.mediaType === \"locationMessage\" && message.body.split('|').length >= 2) {\n      let locationParts = message.body.split('|')\n      let imageLocation = locationParts[0]\n      let linkLocation = locationParts[1]\n\n      let descriptionLocation = null\n\n      if (locationParts.length > 2)\n        descriptionLocation = message.body.split('|')[2]\n\n      return <LocationPreview image={imageLocation} link={linkLocation} description={descriptionLocation} />\n    }\n    /* else if (message.mediaType === \"vcard\") {\n      let array = message.body.split(\"\\n\");\n      let obj = [];\n      let contact = \"\";\n      for (let index = 0; index < array.length; index++) {\n        const v = array[index];\n        let values = v.split(\":\");\n        for (let ind = 0; ind < values.length; ind++) {\n          if (values[ind].indexOf(\"+\") !== -1) {\n            obj.push({ number: values[ind] });\n          }\n          if (values[ind].indexOf(\"FN\") !== -1) {\n            contact = values[ind + 1];\n          }\n        }\n      }\n      return <VcardPreview contact={contact} numbers={obj[0].number} />\n    } */\n    /*else if (message.mediaType === \"multi_vcard\") {\n      console.log(\"multi_vcard\")\n      console.log(message)\n    \t\n      if(message.body !== null && message.body !== \"\") {\n        let newBody = JSON.parse(message.body)\n        return (\n          <>\n            {\n            newBody.map(v => (\n              <VcardPreview contact={v.name} numbers={v.number} />\n            ))\n            }\n          </>\n        )\n      } else return (<></>)\n    }*/\n    else if (message.mediaType === \"image\") {\n      return <ModalImageCors imageUrl={message.mediaUrl} />;\n    } else if (message.mediaType === \"audio\") {\n      return (\n        <audio controls>\n          <source src={message.mediaUrl} type=\"audio/ogg\"></source>\n        </audio>\n      );\n    } else if (message.mediaType === \"video\") {\n      return (\n        <video\n          className={classes.messageMedia}\n          src={message.mediaUrl}\n          controls\n        />\n      );\n    } else {\n      return (\n        <>\n          <div className={classes.downloadMedia}>\n            <Button\n              startIcon={<GetApp />}\n              color=\"primary\"\n              variant=\"outlined\"\n              target=\"_blank\"\n              href={message.mediaUrl}\n            >\n              Download\n            </Button>\n          </div>\n          <Divider />\n        </>\n      );\n    }\n  };\n\n  const renderMessageAck = (message) => {\n    if (message.ack === 1) {\n      return <AccessTime fontSize=\"small\" className={classes.ackIcons} />;\n    }\n    if (message.ack === 2) {\n      return <Done fontSize=\"small\" className={classes.ackIcons} />;\n    }\n    if (message.ack === 3) {\n      return <DoneAll fontSize=\"small\" className={classes.ackIcons} />;\n    }\n    if (message.ack === 4 || message.ack === 5) {\n      return <DoneAll fontSize=\"small\" className={classes.ackDoneAllIcon} />;\n    }\n  };\n\n  const renderDailyTimestamps = (message, index) => {\n    if (index === 0) {\n      return (\n        <span\n          className={classes.dailyTimestamp}\n          key={`timestamp-${message.id}`}\n        >\n          <div className={classes.dailyTimestampText}>\n            {format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")}\n          </div>\n        </span>\n      );\n    }\n    if (index < messagesList.length - 1) {\n      let messageDay = parseISO(messagesList[index].createdAt);\n      let previousMessageDay = parseISO(messagesList[index - 1].createdAt);\n\n      if (!isSameDay(messageDay, previousMessageDay)) {\n        return (\n          <span\n            className={classes.dailyTimestamp}\n            key={`timestamp-${message.id}`}\n          >\n            <div className={classes.dailyTimestampText}>\n              {format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")}\n            </div>\n          </span>\n        );\n      }\n    }\n    if (index === messagesList.length - 1) {\n      return (\n        <div\n          key={`ref-${message.createdAt}`}\n          ref={lastMessageRef}\n          style={{ float: \"left\", clear: \"both\" }}\n        />\n      );\n    }\n  };\n\n  const renderNumberTicket = (message, index) => {\n    if (index < messagesList.length && index > 0) {\n\n      let messageTicket = message.ticketId;\n      let connectionName = message.ticket?.whatsapp?.name;\n      let previousMessageTicket = messagesList[index - 1].ticketId;\n\n      if (messageTicket !== previousMessageTicket) {\n        return (\n          <center>\n            <div className={classes.ticketNunberClosed}>\n              Conversa encerrada: {format(parseISO(messagesList[index - 1].createdAt), \"dd/MM/yyyy HH:mm:ss\")}\n            </div>\n\n            <div className={classes.ticketNunberOpen}>\n              Conversa iniciada: {format(parseISO(message.createdAt), \"dd/MM/yyyy HH:mm:ss\")}\n            </div>\n          </center>\n        );\n      }\n    }\n  };\n\n  const renderMessageDivider = (message, index) => {\n    if (index < messagesList.length && index > 0) {\n      let messageUser = messagesList[index].fromMe;\n      let previousMessageUser = messagesList[index - 1].fromMe;\n\n      if (messageUser !== previousMessageUser) {\n        return (\n          <span style={{ marginTop: 16 }} key={`divider-${message.id}`}></span>\n        );\n      }\n    }\n  };\n\n  const renderQuotedMessage = (message) => {\n    return (\n      <div\n        className={clsx(classes.quotedContainerLeft, {\n          [classes.quotedContainerRight]: message.fromMe,\n        })}\n      >\n        <span\n          className={clsx(classes.quotedSideColorLeft, {\n            [classes.quotedSideColorRight]: message.quotedMsg?.fromMe,\n          })}\n        ></span>\n        <div className={classes.quotedMsg}>\n          {!message.quotedMsg?.fromMe && (\n            <span className={classes.messageContactName}>\n              {message.quotedMsg?.contact?.name}\n            </span>\n          )}\n\n          {message.quotedMsg.mediaType === \"audio\"\n            && (\n              <div className={classes.downloadMedia}>\n                <audio controls>\n                  <source src={message.quotedMsg.mediaUrl} type=\"audio/ogg\"></source>\n                </audio>\n              </div>\n            )\n          }\n          {message.quotedMsg.mediaType === \"video\"\n            && (\n              <video\n                className={classes.messageMedia}\n                src={message.quotedMsg.mediaUrl}\n                controls\n              />\n            )\n          }\n          {message.quotedMsg.mediaType === \"application\"\n            && (\n              <div className={classes.downloadMedia}>\n                <Button\n                  startIcon={<GetApp />}\n                  color=\"primary\"\n                  variant=\"outlined\"\n                  target=\"_blank\"\n                  href={message.quotedMsg.mediaUrl}\n                >\n                  Download\n                </Button>\n              </div>\n            )\n          }\n\n          {message.quotedMsg.mediaType === \"image\"\n            && (\n              <ModalImageCors imageUrl={message.quotedMsg.mediaUrl} />)\n            || message.quotedMsg?.body}\n\n        </div>\n      </div>\n    );\n  };\n\n  const renderMessages = () => {\n    if (messagesList.length > 0) {\n      const viewMessagesList = messagesList.map((message, index) => {\n\n        if (message.mediaType === \"call_log\") {\n          return (\n            <React.Fragment key={message.id}>\n              {renderDailyTimestamps(message, index)}\n              {renderNumberTicket(message, index)}\n              {renderMessageDivider(message, index)}\n              <div className={classes.messageCenter}>\n                <IconButton\n                  variant=\"contained\"\n                  size=\"small\"\n                  id=\"messageActionsButton\"\n                  disabled={message.isDeleted}\n                  className={classes.messageActionsButton}\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\n                >\n                  <ExpandMore />\n                </IconButton>\n                {isGroup && (\n                  <span className={classes.messageContactName}>\n                    {message.contact?.name}\n                  </span>\n                )}\n                <div>\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 17\" width=\"20\" height=\"17\">\n                    <path fill=\"#df3333\" d=\"M18.2 12.1c-1.5-1.8-5-2.7-8.2-2.7s-6.7 1-8.2 2.7c-.7.8-.3 2.3.2 2.8.2.2.3.3.5.3 1.4 0 3.6-.7 3.6-.7.5-.2.8-.5.8-1v-1.3c.7-1.2 5.4-1.2 6.4-.1l.1.1v1.3c0 .2.1.4.2.6.1.2.3.3.5.4 0 0 2.2.7 3.6.7.2 0 1.4-2 .5-3.1zM5.4 3.2l4.7 4.6 5.8-5.7-.9-.8L10.1 6 6.4 2.3h2.5V1H4.1v4.8h1.3V3.2z\"></path>\n                  </svg> <span>Chamada de voz/vídeo perdida às {format(parseISO(message.createdAt), \"HH:mm\")}</span>\n                </div>\n              </div>\n            </React.Fragment>\n          );\n        }\n\n        if (!message.fromMe) {\n          return (\n            <React.Fragment key={message.id}>\n              {renderDailyTimestamps(message, index)}\n              {renderNumberTicket(message, index)}\n              {renderMessageDivider(message, index)}\n              <div className={classes.messageLeft}>\n                <IconButton\n                  variant=\"contained\"\n                  size=\"small\"\n                  id=\"messageActionsButton\"\n                  disabled={message.isDeleted}\n                  className={classes.messageActionsButton}\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\n                >\n                  <ExpandMore />\n                </IconButton>\n                {isGroup && (\n                  <span className={classes.messageContactName}>\n                    {message.contact?.name}\n                  </span>\n                )}\n\n                {/* aviso de mensagem apagado pelo contato */}\n                {message.isDeleted && (\n                  <div>\n                    <span className={\"message-deleted\"}\n                    >Essa mensagem foi apagada pelo contato &nbsp;\n                      <Block\n                        color=\"error\"\n                        fontSize=\"small\"\n                        className={classes.deletedIcon}\n                      />\n                    </span>\n                  </div>\n                )}\n\n                {(message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"vcard\"\n                  //|| message.mediaType === \"multi_vcard\" \n                ) && checkMessageMedia(message)}\n                <div className={classes.textContentItem}>\n                  {message.quotedMsg && renderQuotedMessage(message)}\n                  <MarkdownWrapper>{message.mediaType === \"locationMessage\" ? null : message.body}</MarkdownWrapper>\n                  <span className={classes.timestamp}>\n                    {format(parseISO(message.createdAt), \"HH:mm\")}\n                  </span>\n                </div>\n              </div>\n            </React.Fragment>\n          );\n        } else {\n          return (\n            <React.Fragment key={message.id}>\n              {renderDailyTimestamps(message, index)}\n              {renderNumberTicket(message, index)}\n              {renderMessageDivider(message, index)}\n              <div className={classes.messageRight}>\n                <IconButton\n                  variant=\"contained\"\n                  size=\"small\"\n                  id=\"messageActionsButton\"\n                  disabled={message.isDeleted}\n                  className={classes.messageActionsButton}\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\n                >\n                  <ExpandMore />\n                </IconButton>\n                {(message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"vcard\"\n                  //|| message.mediaType === \"multi_vcard\" \n                ) && checkMessageMedia(message)}\n                <div\n                  className={clsx(classes.textContentItem, {\n                    [classes.textContentItemDeleted]: message.isDeleted,\n                  })}\n                >\n                  {message.isDeleted && (\n                    <Block\n                      color=\"disabled\"\n                      fontSize=\"small\"\n                      className={classes.deletedIcon}\n                    />\n                  )}\n                  {message.quotedMsg && renderQuotedMessage(message)}\n                  <MarkdownWrapper>{message.body}</MarkdownWrapper>\n                  <span className={classes.timestamp}>\n                    {format(parseISO(message.createdAt), \"HH:mm\")}\n                    {renderMessageAck(message)}\n                  </span>\n                </div>\n              </div>\n            </React.Fragment>\n          );\n        }\n      });\n      return viewMessagesList;\n    } else {\n      return <div>Diga olá para seu novo contato!</div>;\n    }\n  };\n\n  return (\n    <div className={classes.messagesListWrapper}>\n      <MessageOptionsMenu\n        message={selectedMessage}\n        anchorEl={anchorEl}\n        menuOpen={messageOptionsMenuOpen}\n        handleClose={handleCloseMessageOptionsMenu}\n      />\n      <div\n        id=\"messagesList\"\n        className={classes.messagesList}\n        onScroll={handleScroll}\n      >\n        {messagesList.length > 0 ? renderMessages() : []}\n      </div>\n      {loading && (\n        <div>\n          <CircularProgress className={classes.circleLoading} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MessagesList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}