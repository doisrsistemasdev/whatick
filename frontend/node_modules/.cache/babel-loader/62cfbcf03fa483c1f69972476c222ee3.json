{"ast":null,"code":"import _slicedToArray from\"/Users/jucenirleonardo/Documents/GitHub/whaticket_saas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useHistory}from\"react-router-dom\";import QRCode from'react-qr-code';import{SuccessContent,Total}from'./style';import{CopyToClipboard}from'react-copy-to-clipboard';import{FaCopy,FaCheckCircle}from'react-icons/fa';import{socketConnection}from\"../../../services/socket\";import{useDate}from\"../../../hooks/useDate\";import{toast}from\"react-toastify\";function CheckoutSuccess(props){var pix=props.pix;var _useState=useState(pix.qrcode.qrcode),_useState2=_slicedToArray(_useState,1),pixString=_useState2[0];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),copied=_useState4[0],setCopied=_useState4[1];var history=useHistory();var _useDate=useDate(),dateToClient=_useDate.dateToClient;useEffect(function(){var companyId=localStorage.getItem(\"companyId\");var socket=socketConnection({companyId:companyId});socket.on(\"company-\".concat(companyId,\"-payment\"),function(data){if(data.action===\"CONCLUIDA\"){toast.success(\"Sua licen\\xE7a foi renovada at\\xE9 \".concat(dateToClient(data.company.dueDate),\"!\"));setTimeout(function(){history.push(\"/\");},4000);}});},[history]);var handleCopyQR=function handleCopyQR(){setTimeout(function(){setCopied(false);},1*1000);setCopied(true);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Total,null,/*#__PURE__*/React.createElement(\"span\",null,\"TOTAL\"),/*#__PURE__*/React.createElement(\"strong\",null,\"R$\",pix.valor.original.toLocaleString('pt-br',{minimumFractionDigits:2}))),/*#__PURE__*/React.createElement(SuccessContent,null,/*#__PURE__*/React.createElement(QRCode,{value:pixString}),/*#__PURE__*/React.createElement(CopyToClipboard,{text:pixString,onCopy:handleCopyQR},/*#__PURE__*/React.createElement(\"button\",{className:\"copy-button\",type:\"button\"},copied?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"span\",null,\"Copiado\"),/*#__PURE__*/React.createElement(FaCheckCircle,{size:18})):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"span\",null,\"Copiar c\\xF3digo QR\"),/*#__PURE__*/React.createElement(FaCopy,{size:18})))),/*#__PURE__*/React.createElement(\"span\",null,\"Para finalizar, basta realizar o pagamento escaneando ou colando o c\\xF3digo Pix acima :)\")));}export default CheckoutSuccess;","map":null,"metadata":{},"sourceType":"module"}